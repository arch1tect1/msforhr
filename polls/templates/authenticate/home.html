<!DOCTYPE html>
<html lang="en">
    <head>
      {% load static %}     
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>msforhr</title>

        <link rel="shortcut icon" type="svg+xml" href="{% static 'icon.svg' %}"/>
        <link rel="stylesheet" type="text/css" href="{% static 'css\style.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css\styles.css' %}">

        <script src="{% static 'js\datatables-simple-demo.js' %}"></script>
        <script src="{% static 'js\scripts.js' %}"></script>   

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js" crossorigin="anonymous"></script>

        <!-- Table Scripts-->
        <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" crossorigin="anonymous"></script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <style type="text/css">
        @media screen and (max-width: 600px) {
        .logo {
            width: 100px;
            height: 100px;
        }    
          #mynav {
            visibility: hidden;
          }
          #dashboard-card {
            margin-bottom: -120px;
          }
          .policy_terms {visibility: hidden;}

        }    
        #mynav .nav-txt, .login {font-family: 'Lucida Grande', 'Lucida Sans Unicode', Arial, Helvetica, Verdana, sans-serif; color: #fff; font-size: 14px;}
        .upload {background-color: #0088cc; font-size: 14px;}
        .upload:hover {background-color: #0088cc;}
        .delete {font-size: 14px;}
        #upload_button {
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
}
        </style>
    </head>
    </head>
    <body class="sb-nav-fixed">

        <nav class="sb-topnav navbar navbar-expand" id="nav-back">
            <a class="navbar-brand ps-3 nvbr" href="/profile"><img class="logo" src="/static/img/icon.svg"><span class="msforhr">msforhr</span></a>

            <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0 toggle_btn" id="sidebarToggle" href="#!"><i class="fas fa-bars"></i></button>

            <form class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-f3 my-2 my-md-0" method="POST" action="/profile" style="visibility: hidden;">
                <div class="input-group">
                    <input type="search" placeholder="Search..." class="form-control search-input" data-table="customers-list"/>

                    <button type="button" class="btn btn-primary search_btn"><i class="fas fa-search"></i></button>

                </div>
            </form>
            <!-- Navbar-->

    <ul class="navbar-nav ml-auto">
      
      {# Will know if user is logged in or not#}
      {% if user.is_authenticated %}

      <li class="nav-item active">
        <a class="nav-link login" href="{% url 'logout' %}" style="color: #fff; font-size: 14px;">Logout</a>
      </li>
      <li class="nav-item active">
        <a class="nav-link login" href="{% url 'edit_profile' %}" style="color: #fff; font-size: 14px;">Edit Profile</a>
      </li>

      
      {% else %}

    <li class="nav-item active">
        <a class="nav-link login" href="{% url 'login' %}" style="color: #fff;">Login</a>
    </li>

    <li class="nav-item active">
        <a class="nav-link login" href="{% url 'register' %}" style="color: #fff;">Register</a>
    </li>

      {% endif%}
     
    </ul>
    
        </nav>


        <div id="layoutSidenav">
            <div id="layoutSidenav_nav" class="f-nav">
                <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                    <div class="sb-sidenav-menu sidenav-menu-new">
                        <div class="nav my_nav">
<!--                             <a class="nav-link" href="profile.php">
                                <div class="container">
                                    <div class="d-flex justify-content-center h-100">
                                        <div class="image_outer_container">
                                            <div class="green_icon"></div>
                                            <div class="image_inner_container">
                                                <img class="self" src="/static/img/self.svg">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </a> -->

<!--                 <div class="container">
                    <div class="picture-container">
                    </div>
                </div> -->



                            <label class="profile_name" style="color: #333333;"></label>
                            <a class="nav-link left-panel-txt" id="left-panel-txt" href="/home">
                                <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt tachometer"></i></div>
                                <span class="dashboard">Dashboard</span>
                            </a>

<!--                             <a class="nav-link left-panel-txt" href="/recruitment" style="color: #333333; font-family: Lucida Grande, Lucida Sans Unicode, Arial, Helvetica, Verdana, sans-serif; font-size: 13px;">
                                <div class="sb-nav-link-icon"><i class="fas fa-book-open book-open"></i></div>
                                <span class="/recruitment">Add Employee</span>
                            </a> -->

                        </div>
                    </div>


                    <div class="sb-sidenav-footer" id="logout-footer">
                        <div class="small">
                        <a href="mailto:letstalk@msforhr.com" style="font-family: 'Lucida Grande', 'Lucida Sans Unicode', Arial, Helvetica, Verdana, sans-serif; font-size: 13px;">letstalk@msforhr.com</a>
                        </div>
                    </div>
                </nav>
            </div>
            <div id="layoutSidenav_content">
                <main>
                    <div class="container-fluid px-4">
                        <h1 class="mt-4 dash">General Info</h1><br>
                        <div class="row">


                 <div class="col-xl-3 col-md-6">
                    <div class="card text-white mb-4" style="background-color: #0088cc;">
                        <div class="card-body badge-text">Badge Card<hr style="display: block; border: 1px solid #fff;"></div><br>


                        {% if user.is_authenticated %}
                        <div style="margin-top: -25px; margin-left: 20px;">
                            <p>{{user.first_name}} {{ user.last_name}}</p>
<!--                             <p>Username: {{user.username}}</p> -->
                            <p>{{user.email}}</p></div>


                        {% endif %}
                        
                    </div>
                </div>
       
    {% if user.is_authenticated %}            
        <div class="card mb-4">
            <div class="card-header">
                <i class="fas fa-table me-1 emp-list"></i>
                Employees List
            </div>


            <div class="card-body">
            <a class="btn btn-info mt-2 mb-2 upload" id="upload_button" href="{% url 'add_file' %}" role="button">Tap to Upload</a>

<!--             {% for message in messages %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            {% endfor %} -->


                <table class="table table-bordered customers-list" id="datatablesSimple">

                    <thead>
                        <tr>
                            <th scope="col">File</th>
                            <th scope="col">Name</th>
                            <th scope="col">Date</th>
                            <th scope="col">Comments</th>
                            <th scope="col">Action</th>
                        </tr>
                    </thead>

                    <tbody>
                        {% for file in files %}
                        <tr>
                            <td><a href="{{ file.pdf.url }}">{{ file.pdf.url }}</a></td>
                            <td>{{ file.name }}</td>
                            <td>{{ file.date }}</td>
                            <td>{{ file.comments }}</td>
                            <td class="form-inline">
                                <a class="btn btn-primary mr-2 upload" href="{{ file.pdf.url }}" role="button">Download</a>
                                <form action="{% url 'delete_file' file.id %}" method="POST">
                                    {% csrf_token %}
                                    <input type="submit" role="button" class="btn btn-danger delete" value="Delete" onclick="return confirm('Are You sure to delete {{ file.name }}?')">
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>

                </table>
            </div>
        </div>
{% endif %}
    </div>

</main>

    <script>
        (function(document) {
            'use strict';

            var TableFilter = (function(myArray) {
                var search_input;

                function _onInputSearch(e) {
                    search_input = e.target;
                    var tables = document.getElementsByClassName(search_input.getAttribute('data-table'));
                    myArray.forEach.call(tables, function(table) {
                        myArray.forEach.call(table.tBodies, function(tbody) {
                            myArray.forEach.call(tbody.rows, function(row) {
                                var text_content = row.textContent.toLowerCase();
                                var search_val = search_input.value.toLowerCase();
                                row.style.display = text_content.indexOf(search_val) > -1 ? '' : 'none';
                            });
                        });
                    });
                }

                return {
                    init: function() {
                        var inputs = document.getElementsByClassName('search-input');
                        myArray.forEach.call(inputs, function(input) {
                            input.oninput = _onInputSearch;
                        });
                    }
                };
            })(Array.prototype);

            document.addEventListener('readystatechange', function() {
                if (document.readyState === 'complete') {
                    TableFilter.init();
                }
            });

        })(document);
    </script>

                <footer class="py-4 mt-auto" id="shitty_footer">
                    <div class="container-fluid px-4">
                        <div class="d-flex align-items-center justify-content-between small">
                            <div class="text-muted copyright-txt">
                            <b style="color: #000;">msforhr</b> <span style="color: #000;">is a cloud-based management system app <br> for hr teams  who can store resumes on the platform with <br> a focus on fast data access and security.</span>
                            <br><br>
                            Copyright &copy msforhr 2022<br>Powered by <b class="author">Tamerlan Imanov</b><br><br>
                            </div>
                            <div class="policy_terms">
                                <a class="policy" href="{% url 'privacy' %}">Privacy Policy</a>
                                &middot;
                                <a class="privacy" href="{% url 'terms' %}">Terms &amp; Conditions</a>
                            </div>
                        </div>
                    </div>
                </footer>
            </div>
        </div>
    </body>
</html>